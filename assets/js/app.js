
$('body').append('<div class="d-flex text-center loading-screen" id="loading-screen"><h1 class="font-size-h2 font-saira-semi-condensed color-tangerine">Loading Central Dispatch Touchscreen Experience...</h1><div class="loader">Loading...</div></div><div id="image-loader"><div id="preloader"><img src="assets/img/about-create-listings.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/about-dashboard.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/about-manage-dispatches.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/about-manage-listings.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/add-user.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/BTN-CORE.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/blind-ratings-modal-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/blind-ratings-modal-2.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/BTN-NAV-BLANK-HOVER.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/BTN-NAV-BLANK.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/BTN-START-BLANK.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_01.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_02.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_03.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_04.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_05.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_06.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_07.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_08.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS_09.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CALLOUTS3.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/carrier-app-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/carrier-app-2.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/carrier-app-3.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/carrier-verification-thumb.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/cd-nada-touchscreen-background.jpg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/cd-manheim-integration.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/Central_Dispatch_rgb_reverse.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/coming-soon-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/coming-soon-2.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/coming-soon-3.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/company-overview.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CORE-BG.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CORE.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/CP.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/dashboard-admin-panel.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_01.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_02.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_03.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_04.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_05.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_06.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_07.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_08.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/gold-list-item-core_09.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-clock.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-exit.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-menu.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-minus.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-plus.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-rotate.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-x-gold.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-x.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/icon-zoom.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_01.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_02.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_03.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_04.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_05.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_06.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_07.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_08.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/list-item-core_09.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/log-into-CD.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/mann-listing-int-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/mann-listing-int-modal-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/mann-listing-int-modal-2.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/marketplace-intel-report-thumb-compressed.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/modal-market-intelligence.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/nav-arrow.svg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/ONE.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/poster.jpg" width="1" height="1" alt="Preloaded Image"><img src="assets/img/PREMIUM-BG-EXP.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/PREMIUM-BG.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/pricecheck-thumbnail.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/price-check-plus.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/price-check.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/pricecheck-thumbnail.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/real-time-tracking-dispatches.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/real-time-tracking-map.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/START-BTN-BLANK-HOVER.png" width="1" height="1" alt="Preloaded Image" id="start_hover"><img src="assets/img/START-BTN-BLANK.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/tile.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/user-management.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/user-management-thumb.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/vehicle-inspections-phone-1-start-button.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/vehicle-inspections-phone-1.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/vehicle-inspections-phone-2.png" width="1" height="1" alt="Preloaded Image"><img src="assets/img/vehicle-inspections-phone-3.png" width="1" height="1" alt="Preloaded Image"></div></div>');

$(window).on('load', function(){
  setTimeout(removeLoader, 2000); //wait for page load PLUS two seconds.
});

function removeLoader(){
	//Hide and remove loading screen
    $( "#loading-screen" ).fadeOut(500, function() {
      	// fadeOut complete. Remove the loading div
      	$( "#loading-screen" ).remove(); //makes page more lightweight 
  	});
  	//hide the image loader
  	$( "#image-loader" ).fadeOut(500, function() {
      $( "#image-loader" ).remove(); //leave for now
  	});
}
if ("serviceWorker" in navigator) {
  window.addEventListener("load", function() {
    navigator.serviceWorker
      .register("/clients/central-dispatch/nada-2025/stg/serviceWorker.js")
      .then(res => console.log("service worker registered"))
      .catch(err => console.log("service worker not registered", err))
  })
}




function toggleFullScreen() {
  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
      $("#app").addClass("full_screen");
    } else if (document.documentElement.msRequestFullscreen) {
      document.documentElement.msRequestFullscreen();
      $("#app").addClass("full_screen");
    } else if (document.documentElement.mozRequestFullScreen) {
      document.documentElement.mozRequestFullScreen();
      $("#app").addClass("full_screen");
    } else if (document.documentElement.webkitRequestFullscreen) {
      document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
      $("#app").removeClass("full_screen");
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
      $("#app").removeClass("full_screen");
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
      $("#app").removeClass("full_screen");
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
      $("#app").removeClass("full_screen");
    }
  }
}



document.onselectstart = new Function("return true");



//SETUP HAMMER JS

var myElement = document.getElementById('app');
var mc = new Hammer(myElement);





/////////////////////////////////////////////////////////
// START DOC READY  /////////////////////////////////////
/////////////////////////////////////////////////////////

$( document ).ready(function() {
    console.log( "ready!" );
    







	let vid = document.getElementById("video_bg");

	function playVid() {
	    vid.play();
	}

	function pauseVid() {
	    vid.pause();
	}

	var timer = '';

	// If theres no activity for 30 (30000) seconds do something 
	// temporarily set to 5 min (300000)
	var activityTimeout = setTimeout(inActive, 300000);

	function backtoStart(){
		console.log('backtoStart() was executed.');
		clearTimeout(activityTimeout);
	    activityTimeout = setTimeout(inActive, 300000);


	    $( '.section' ).each(function(index) {
			// check section has opacity class
			if($(this).hasClass("op-0")){
				$(this).removeClass('op-0');
			} else{
				//do nothing, its hidden
			}

			if($(this).hasClass("animate__fadeIn")){
				$(this).removeClass('animate__fadeIn').addClass('animate__fadeOut');
			} else{
				//do nothing, its hidden
			}
		});
		$('.dark-overlay').fadeOut();
	    $('#video-bg')[0].play(); 
 		$('#video-bg').removeClass('blur'); 
 		//$('.section').addClass('d-none');
 		$('#start-screen').removeClass('d-none animate__fadeOut op-0').addClass('animate__fadeIn');
 		$('#footer-menu').addClass('d-none');
 		$('#footer-exit').addClass('d-none');
 		window.setTimeout(function(){
			$(this).addClass('d-none');
	 	},500);
	}

	function resetActive(){
		console.log('resetActive() was executed.');
	    $('#app-container').attr('class', 'app_container active');
	    clearTimeout(activityTimeout);
	    activityTimeout = setTimeout(inActive, 300000);
	    clearInterval(timer);
	    $('#video-bg')[0].play(); 
	 	$('#video-bg').removeClass('blur');
	 	//set UI opacity to 1
	 	$('.app_footer').removeClass('op-0');
	 	$('.img-overlay').removeClass('op-0');
	 	$( '.section' ).each(function(index) {
		   // check section has opacity class
            if($(this).hasClass("op-0")){
               $(this).removeClass('op-0');
            } else{
                //do nothing, its hidden
            }
		});
		//hide the timer screen
		$( '.timer-overlay' ).fadeOut();

		
	}

	// No activity do something.
	function inActive(){
		console.log('inActive() was executed.');
		$(document).unbind('keyup keypress tap taphold click', function(){
			resetActive();
		});
	    //$(document.body).attr('class', 'app inactive');
	    $('#app-container').attr('class', 'app_container inactive');
	    $('#video-bg')[0].pause(); 
	 	$('#video-bg').addClass('blur');
	 	//set UI opacity to 0
	 	$('.app_footer').addClass('op-0');
	 	$('.img-overlay').addClass('op-0');
	 	$( '.section' ).each(function(index) {
		   // check section is visible
            if($(this).is(":visible")){
               $(this).addClass('op-0');
            } else{
                //do nothing, its hidden
            }
		});
		//show the timer screen
		$( '.timer-overlay' ).fadeIn();

		//Start the clock
		var sec = 60;
		var timer = setInterval(function() {
		    $('#timer-counter').animate({
		        // opacity: 0.25,
		        // fontSize: '2em'
		    }, 500, function() {
		        // $('#hideMsg span').css('opacity', 1);
		        // $('#hideMsg span').css('font-size', '1em');
		        $('#timer-counter').text(sec--);
		    })

		    if (sec == -1) {
		        //reset to start screen
		        console.log('timer ran out.');
		        clearInterval(timer);
		        $('#timer-counter').text('60');
		        $( '.timer-overlay' ).fadeOut();
		        backtoStart();
		    }

		    
		   

		}, 1000);

		 //user took action on timer screen, back to business
		$("#exit-timer").click(function (e) {
			e.preventDefault();
			// clear activity timer
			clearTimeout(activityTimeout);

			//reset activity timeout
    		activityTimeout = setTimeout(inActive, 300000);

    		//clear countdown timer
			clearInterval(timer);

			//set timer text to 60
			$('#timer-counter').text('60');

		});


	}

	
	// Check for mousemove, could add other events here such as checking for key presses ect.
	$(document).bind('keyup keypress tap taphold click', function(){
		
		resetActive();
	});





	$('.modal').on('hide.bs.modal', function (e) {
		//reset modal supporting assets. ex. overlays, extra images, etc..
		//$('.modal-asset').css('display', 'none');

		//Remove Focus
		var previousFocus = document.activeElement;
		// Return focus to that element
		if (previousFocus) {
			previousFocus.focus();
		}
	});

	//Hover Start button
	$("#start-app").hover(function () {
	    $(this).toggleClass("start_hover");
	 });

  	//start the app
	$('#start-app').click(function() {
		console.log( "start btn clicked!" );
		//check for fullscreen
		if ($('body').hasClass('full_screen')) {
			//do nothing
		} else {
			toggleFullScreen();
		}
		window.setTimeout(function(){
		 	$('#start-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
		 	$('.dark-overlay').fadeIn();
	 	},100);
	 	window.setTimeout(function(){
	 		$('#menu-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#start-screen').addClass('d-none');
		 	$('#footer-exit').removeClass('d-none');
	 	},500);
	});
	//Menu Clicks
	$('#manheim-listing-integration').click(function() {
		//e.preventDefault();
		console.log( "manheim-listing-integration btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#manheim-listing-integration-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#tailored-plans').click(function() {
		console.log( "tailored-plans-screen btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#tailored-plans-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#market-intelligence').click(function() {
		// e.preventDefault();
		console.log( "market-intelligence btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#market-intelligence-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#carrier-app').click(function() {
		console.log( "carrier-app btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#carrier-app-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#marketplace-apis').click(function() {
		
		console.log( "marketplace-apis btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#marketplace-apis-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#marketplace-integrity').click(function() {
		console.log( "marketplace-integrity btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#marketplace-integrity-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#about-the-marketplace').click(function() {
		
		console.log( "about-the-marketplace btn clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#about-the-marketplace-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});
	$('#see-whats-coming').click(function(e) {
		e.preventDefault();
		// UNCOMMENT WHEN PAGE IS BUILT
		console.log( "see-whats-coming link clicked!" );
		window.setTimeout(function(){
		 	$('#menu-screen').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].pause(); 
	 		$('#video-bg').addClass('blur');
	 		$('#see-whats-coming-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 	$('#menu-screen').addClass('d-none');
		 	$('#footer-menu').removeClass('d-none');
	 	},500);
	});

	$( '.close-screen' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	        // panel to show
	        var parentContext = $(this).parents('.section');
	        
	        //animate entrance/exit
		    $('.section', parentContext).removeClass('animate__fadeIn').addClass('animate__fadeOut');
		    $('.modal_frame',parentContext).removeClass('off_stage animate__fadeOutDownBig').addClass('animate__fadeInUp');
		    
		    setTimeout(function() {  
		        $('.section', parentContext).addClass('d-none');
		        $('#video-bg')[0].play(); 
		 		$('#video-bg').removeClass('blur');
		 		$('#menu-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
		 		$('#footer-menu').addClass('d-none');
		    }, 200);
	    });
	});
// x-btn
	$('.x-btn').click(function() {
		window.setTimeout(function(){
		 	$('.section').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].play(); 
	 		$('#video-bg').removeClass('blur'); 
	 		$('.section').addClass('d-none');
	 		$('#menu-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
	 		$('#footer-menu').addClass('d-none');
	 	},500);
	});
	$('#footer-exit').click(function() {
		window.setTimeout(function(){
		 	$('.section').removeClass('animate__fadeIn').addClass('animate__fadeOut');
		 	$('.dark-overlay').fadeOut();
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].play(); 
	 		$('#video-bg').removeClass('blur'); 
	 		$('.section').addClass('d-none');
	 		$('#start-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
	 		$('#footer-menu').addClass('d-none');
	 		$('#footer-exit').addClass('d-none');
	 	},500);
	});
	$('#footer-menu').click(function() {
		window.setTimeout(function(){
		 	$('.section').removeClass('animate__fadeIn').addClass('animate__fadeOut');
	 	},100);
	 	window.setTimeout(function(){
	 		$('#video-bg')[0].play(); 
	 		$('#video-bg').removeClass('blur'); 
	 		$('.section').addClass('d-none');
	 		$('#menu-screen').removeClass('d-none animate__fadeOut').addClass('animate__fadeIn');
	 		$('#footer-menu').addClass('d-none');
	 	},500);
	});

	$('#feature_toggle').click(function() {
		$('#plans').toggleClass('feature_open');
	});


	// $('#inner-modal-overlay, #drawer-img').click(function() {
	// 	$( '#inner-modal-overlay' ).fadeOut( 500, function() {}  );
	// 	$( '.pc-hs-1' ).fadeIn( 500, function() {}  );
	// 	// $( '#drawer-img' ).fadeOut( 500, function() {}  );
	// 	$( '#drawer-img' ).removeClass('animate__slideInRight').addClass('animate__slideOutRight').toggleClass('d-block d-none');
	// });
	// $('#drawer-trigger').click(function() {
	// 	$( '#inner-modal-overlay' ).fadeIn( 500, function() {}  );
	// 	$( '.pc-hs-1' ).fadeOut( 500, function() {}  );
	// 	// $( '#drawer-img' ).fadeIn( 500, function() {}  );
	// 	$( '#drawer-img' ).removeClass('animate__slideOutRight').addClass('animate__slideInRight').toggleClass('d-block d-none');
	// });
	$( '.drawer-trigger' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.drawer-overlay',parentContext ).fadeIn( 500, function() {}  );
			$( '.pc-hs-1',parentContext ).fadeOut( 500, function() {}  );
			$( '.drawer-img',parentContext ).removeClass('animate__slideOutRight').addClass('animate__slideInRight').toggleClass('d-block d-none');
	    });
	});
	$( '.drawer-overlay, .drawer-img' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.drawer-overlay',parentContext ).fadeOut( 500, function() {}  );
			$( '.pc-hs-1',parentContext ).fadeIn( 500, function() {}  );
			$( '.drawer-img',parentContext ).removeClass('animate__slideInRight').addClass('animate__slideOutRight').toggleClass('d-block d-none');
	    });
	});
	$( '.map-trigger' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.map-overlay',parentContext ).fadeIn( 500, function() {}  );
			$( '.pc-hs-1',parentContext ).fadeOut( 500, function() {}  );
			$( '.map-img',parentContext ).removeClass('animate__slideOutDown').addClass('animate__slideInUp').toggleClass('d-block d-none');
			// window.setTimeout(function(){
		 	// 	$( '.map-img',parentContext ).toggleClass('d-block d-none');
		 	// },500);
	    });
	});
	$( '.map-overlay, .map-img' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.map-overlay',parentContext ).fadeOut( 500, function() {}  );
			$( '.pc-hs-1',parentContext ).fadeIn( 500, function() {}  );
			$( '.map-img',parentContext ).removeClass('animate__slideInUp').addClass('animate__slideOutDown').toggleClass('d-block d-none');
			// window.setTimeout(function(){
		 	// 	$( '.map-img',parentContext ).toggleClass('d-block d-none');
		 	// },500);
	    });
	});

	$( '.listing-trigger' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.listing-overlay',parentContext ).fadeIn( 500, function() {}  );
			$( '.hs-5',parentContext ).fadeOut( 500, function() {}  );
			$( '.listing-img',parentContext ).removeClass('animate__slideOutDown').addClass('animate__slideInUp').toggleClass('d-block d-none');
			// window.setTimeout(function(){
		 	// 	$( '.listing-img',parentContext ).toggleClass('d-block d-none');
		 	// },500);
	    });
	});
	$( '.listing-overlay, .listing-img' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.listing-overlay',parentContext ).fadeOut( 500, function() {}  );
			$( '.hs-5',parentContext ).fadeIn( 500, function() {}  );
			$( '.listing-img',parentContext ).removeClass('animate__slideInUp').addClass('animate__slideOutDown').toggleClass('d-block d-none');
			// window.setTimeout(function(){
		 	// 	$( '.map-img',parentContext ).toggleClass('d-block d-none');
		 	// },500);
	    });
	});
	$( '.blind-ratings-modal-1' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.blind-ratings-modal-2',parentContext ).toggle( "fast", function() {}  );
	    });
	});
	$( '.blind-ratings-modal-2' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $(this).toggle( "fast", function() {}  );
	    });
	});
	// $('.img-toggle').click(function() {
	// 	//$( '#inner-modal-overlay' ).fadeIn( 500, function() {}  );
	// 	$( this ).fadeOut( 500, function() {}  );
	// 	$( '#drawer-img' ).fadeIn( 500, function() {}  );
	// });
	$( '.img-toggle' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.top-img',parentContext).toggleClass( "op-0" );
	        //$( this ).find('.bottom-img').fadeToggle( 500, function() {}  );
	    });
	});


	$( '.phone-start-button' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	        $( '.phone-img-1',parentContext ).removeClass('op-1').addClass('op-0');
	        $( '.phone-start-button',parentContext ).removeClass('op-1').addClass('op-0');
	        $( '.phone-img-2',parentContext ).removeClass('d-none op-0').addClass('op-1');
	        $( '.hs-4',parentContext ).removeClass('d-none op-0').addClass('op-1');
	        window.setTimeout(function(){
	        	$( '.phone-img-1',parentContext ).addClass('d-none');
	        	$( '.phone-start-button',parentContext ).addClass('d-none');
		 	},200);
	    });
	});
	$( '.phone-img-2' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	    	$( '.phone-img-2',parentContext ).addClass('rotate-90');
	        $( '.phone-img-3',parentContext ).addClass('rotate-90');
	        $( '.hs-4',parentContext ).removeClass('op-1').addClass('op-0');
	        window.setTimeout(function(){
	        	$( '.phone-img-3',parentContext ).removeClass('d-none op-0').addClass('op-1');
	        	$( '.phone-img-2',parentContext ).removeClass('op-1').addClass('op-0');
	        	$( '.phone-img-2',parentContext ).addClass('d-none');
	        	$( '.hs-4',parentContext ).addClass('d-none');
		 	},200);
	    });
	});
	$( '.phone-img-3' ).each(function(index) {
	    $(this).on('click', function(e){
	    	e.preventDefault();
	    	var parentContext = $(this).parents('.modal-body');
	    	$( '.phone-img-3',parentContext ).removeClass('op-1').addClass('op-0');
	        $( '.phone-img-1',parentContext ).removeClass('d-none op-0').addClass('op-1 ');
	        $( '.phone-start-button',parentContext ).removeClass('op-0').addClass('op-1');
	        window.setTimeout(function(){
	        	$( '.phone-img-3',parentContext ).addClass('d-none');
	        	$( '.phone-start-button',parentContext ).removeClass('op-0 d-none').addClass('op-1');
	        	$( '.phone-img-2',parentContext ).removeClass('rotate-90');
	        	$( '.phone-img-3',parentContext ).removeClass('rotate-90');
		 	},200);
	    });
	});
	// $('#drawer-img').click(function() {
	// 	if ($('#inner-modal-overlay').hasClass("d-none")) {
	// 		$('#inner-modal-overlay').toggleClass('d-none d-block');
	// 		$('#inner-modal-overlay').toggleClass('animate__fadeIn animate__fadeOut');
	// 	} else {
	// 		$('#inner-modal-overlay').toggleClass('animate__fadeIn animate__fadeOut');
	// 		window.setTimeout(function(){
	// 		 	$('#inner-modal-overlay').addClass('d-none');
	// 	 	},200);
	// 	}
	// 	if ($('.pc-hs-1').hasClass("d-none")) {
	// 		$('.pc-hs-1').toggleClass('d-none d-block');
	// 		$('.pc-hs-1').toggleClass('animate__fadeIn animate__fadeOut');
	// 	} else {
	// 		$('.pc-hs-1').toggleClass('animate__fadeIn animate__fadeOut');
	// 		window.setTimeout(function(){
	// 		 	$('.pc-hs-1').addClass('d-none');
	// 	 	},200);
	// 	}
	// 	if ($('#drawer-img').hasClass("d-none")) {
	// 		$('#drawer-img').toggleClass('d-none d-block');
	// 		$('#drawer-img').toggleClass('animate__slideInRight animate__slideOutRight');
	// 	} else {
	// 		$('#drawer-img').toggleClass('animate__slideInRight animate__slideOutRight');
	// 		window.setTimeout(function(){
	// 		 	$('#drawer-img').addClass('d-none');
	// 	 	},200);
	// 	}
	// });

	// $('#inner-modal-overlay').click(function() {
		
	// 	if ($('#inner-modal-overlay').hasClass("d-none")) {
	// 		$('#inner-modal-overlay').toggleClass('d-none d-block');
	// 		$('#inner-modal-overlay').toggleClass('animate__fadeIn animate__fadeOut');
	// 	} else {
	// 		$('#inner-modal-overlay').toggleClass('animate__fadeIn animate__fadeOut');
	// 		window.setTimeout(function(){
	// 		 	$('#inner-modal-overlay').addClass('d-none');
	// 	 	},200);
	// 	}
	// 	if ($('.pc-hs-1').hasClass("d-none")) {
	// 		$('.pc-hs-1').toggleClass('d-none d-block');
	// 		$('.pc-hs-1').toggleClass('animate__fadeIn animate__fadeOut');
	// 	} else {
	// 		$('.pc-hs-1').toggleClass('animate__fadeIn animate__fadeOut');
	// 		window.setTimeout(function(){
	// 		 	$('.pc-hs-1').addClass('d-none');
	// 	 	},200);
	// 	}
	// 	if ($('#drawer-img').hasClass("d-none")) {
	// 		$('#drawer-img').toggleClass('d-none d-block');
	// 		$('#drawer-img').toggleClass('animate__slideInRight animate__slideOutRight');
	// 	} else {
	// 		$('#drawer-img').toggleClass('animate__slideInRight animate__slideOutRight');
	// 		window.setTimeout(function(){
	// 		 	$('#drawer-img').addClass('d-none');
	// 	 	},200);
	// 	}
	// });

	$('.menu_container #footer-menu').hover (function(){
	  $(this).toggleClass('open');
	});


	//Modal Exit Button - close parent modal
	$('.exit').click(function() {
		console.log( ".exit btn clicked!" );
		exitModal(this);

	});

	function exitModal(modal_item) {
		$(modal_item).parent().closest('.window').removeClass('animate__slideInUp').addClass('animate__fadeOutDownBig');
		$('aside').removeClass('fade_out');
		$('#header').removeClass('fade_out-50');
	    $('#threesixty').removeClass('blur');
	    window.setTimeout( move_off_stage.bind(null, modal_item), 1000 ); // short delay for things to happen
	    $('.cr_hint').addClass('off_stage');
	    $('.zoom_frame').empty();
	    $('.zoom_frame').addClass('off_stage');
	    
	}
	
	//toggleFullScreen
	$('#full_screen_toggle').click(function() {
		toggleFullScreen();
	});


	// listen to events...
	mc.on("panleft panright tap press", function(ev) {
	    //myElement.textContent = ev.type +" gesture detected.";
	    console.log(ev.type +" gesture detected.");
	});

	//HELPERS

	function move_off_stage(modal_item){
		$(modal_item).parent().closest('.window').removeClass('active_window animate__fadeOutUpBig').addClass('off_stage');
	};
	

});
/////////////////////////////////////////////////////////
// END DOC READY  ///////////////////////////////////////
/////////////////////////////////////////////////////////